function login(e){function i(){if(n(),o(),""==l.user.phone&&""==l.user.email)myAlert("请输入邮箱");else if(""==l.user.password)myAlert("请输入密码");else{var e={phone:l.user.phone,email:l.user.email,password:l.user.password};myAjax(api.login,JSON.stringify(e),function(e){"100"==e.result?(myAlert("登录成功"),"checked"==t.attr("checked")?s(e.id,e.sessionid,e.name,30):s(e.id,e.sessionid,e.name),setTimeout(function(){window.location.href="/"},1e3)):"101"==e.result&&myAlert(e.warn)})}return!1}function n(){var e=a.val();/^1[3|5|7|8]\d{9}$/.exec(e)?(l.user.phone=e,l.user.email=""):(l.user.email=e,l.user.phone="")}function o(){var e=u.val();if(""==e)l.user.password="";else{var i=md5(e);l.user.password=i}}function s(e,i,n,o){var s=new Object;o&&(s.expires=o),s.path="/",$.cookie("id",e,s),$.cookie("sessionid",i,s),$.cookie("name",n,s)}var r=e.find(".input-box"),a=r.eq(0).children("input"),u=r.eq(1).children("input"),t=e.find("#autoLog"),l={user:{phone:"",email:"",password:""}};e.on("click","button",i)}$(function(){login($("#login"))});